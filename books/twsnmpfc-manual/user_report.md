---
title: "ユーザーレポート"
---

管理しているネットワーク上のサーバーを使っているユーザーに関するレポートの説明です。誰が、どのサーバーに、どの端末（クライアント）からログインしているか集計したものです。


# ユーザーレポート画面の表示方法
メニューの「レポート」ー「ユーザー分析」ー「ユーザー」をクリックすると表示できます。

# ユーザーレポート画面

![](/images/books/twsnmpfc-manual/picture_pc_3516e439b8651e4e105fabdf80ae1932.png)

のような感じです。

#### ①リスト
ユーザーのリストです。信用スコア、ユーザーID、ログイン先のサーバー、クライアントの数、回数、成功率、最初に発見した日時、最後に発見した日時、操作ボタンがあります。

#### ②操作ボタン

![](/images/books/twsnmpfc-manual/picture_pc_8238900c06b6d92016d2ecacc8f99181.png)

左から＜マップ＞ボタン、＜詳細＞ボタン、＜削除＞ボタンです。
＜マップ＞ボタンは、マップ画面へ移動してサーバーを選択します。
＜詳細＞ボタンをクリックすると、

![](/images/books/twsnmpfc-manual/picture_pc_ae6d2d518ee0a7cbb98b651621ecac4c.png)

ユーザーがサーバーにログインしている状況を詳しく表示します。
＜削除＞ボタンをクリックすると

![](/images/books/twsnmpfc-manual/picture_pc_809f169e2b278167da4037756557a4a0.png)

確認のダイアログを表示します。＜削除＞ボタンをクリックすれば削除できます。

#### ③ディスプレーフィルター
リストの内容をユーザーID、サーバー名に入力した文字列を含むものでフィルター表示します。

#### ④＜グラフと集計＞ボタン
クリックするとグラフと集計のメニューを表示します。

![](/images/books/twsnmpfc-manual/picture_pc_ea5d519fc4de1c1cdbc79047f7c92378.png)


#### ⑤＜CSV>ボタン
リストの内容をCSVファイルに保存します。

#### ⑥＜EXCEL＞ボタン
リストの内容をEXCELファイルに保存します。

#### ⑦＜再計算＞ボタン
信用スコアを再計算します。

#### ⑧＜更新＞ボタン
リストの内容を最新の情報に更新します。

# サーバー別グラフ
ユーザーのログイン状況をサーバー別に集計したものです。

![](/images/books/twsnmpfc-manual/picture_pc_2208bb5a13588127cdde9b8515cc86d3.png)

# グラフ分析
ユーザーがどのクライアントからどのサーバーへログインしたかを分析するための画面です。力学モデル、円形、３Dの３種類の表示ができます。

![](/images/books/twsnmpfc-manual/picture_pc_3ce6a13df73f8462a24d4839ebc782b1.png)

白い円がサーバーです。青い円はログイン成功率が高いものを示しています。成功率が低いものは黄色や赤の円になります。円の大きさはログインの回数で変わります。

![](/images/books/twsnmpfc-manual/picture_pc_8b6779dedaf6646ef5c2b3e1274e8abb.png)

同じ情報を円形の配置にすることもできます。
どちらの表示でも円や線にマウスカーソルを合わせれば詳しい情報を見ることができます。

# ３Dグラフ

X軸にユーザーID、Y軸にクライアント、Z軸にサーバー、色で成功率を円のサイズでログイン回数を表した３Dグラフです。

![](/images/books/twsnmpfc-manual/picture_pc_6265cbb90d21fd97f9afa8f7e0104aff.png)

たぶん、ログイン繰り返し失敗している端末やユーザーを見つけることができると思います。端末とユーザーの組み合わせで失敗している様子がわかりれば、不正なアクセスを見つけることができると思います。

ユーザーレポートの信用スコア計算方法
ユーザーレポートの信用スコアは次のような場合にペナルティーを増やして計算します。

- ログイン失敗が多い
- ログイン元のクライアントの数が多い
- ログイン元のクライアントが怪しい

# ユーザーレポートを作成するためのポーリング
syslogからポーリングでユーザーID、クライアント、ログインの可否の情報を取得して作成します。

![](/images/books/twsnmpfc-manual/picture_pc_5489424b83032691745106d85cba7246.png)

ポーリングの種別でSYSLOGを選択して、モードをuserにします。
フィルターにログの絞り込み条件を設定します。抽出パターンでユーザーIDなどの情報を抽出するパターンを選択します。OpenSSHのログに関しては組み込まれてるSSHのログインを選択すればよいです。

