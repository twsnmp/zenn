---
title: "ポーリング設定"
---


TWSNMP FCのポーリング設定画面についての説明です。


# ポーリング設定画面の表示方法

マップ上やノードリストからノードを選択してノード単位のポーリングリストから表示する方法

![](/images/books/twlogaian-manual/picture_pc_8f065895ab7ee232d9280890c634ceba.png)

とポーリングリストから表示する方法

![](/images/books/twlogaian-manual/picture_pc_3e534ecdd5e723727f0d9abeeab3a192.png)

があります。

＜追加＞ボタンで新規のポーリング設定画面、＜編集＞ボタンで既存のポーリングを編集する画面を表示できます。

# ポーリング設定画面

![](/images/books/twlogaian-manual/picture_pc_d62cdd7e5a34c14c81ee6777dabe90be.png)

のような画面です。

- ノード
対象のノードを選択します。ノード単位のポーリングリストから表示した場合はこの項目はありません。

- 名前
ポーリングに名前をつけます。あなたが分かりやすい名前をお好きにつければよいです。決まりはありません。一覧の表示やログに記録する時に使われます。

- レベル
ポーリングの結果がNGだった場合に問題の程度を示すものです。

|レベル|内容|
|----|----|
|重度(High)|異常の場合、非常に困ったことになるようなレベルです。|
|軽度（Low)|異常の場合、そこそこ困ったことになるレベルです。|
|注意(Warning)|少し気にして欲しいぐらいのレベルです。|
|情報(Info)|ポーリングは実施するけど、結果をただ記録したいだけの場合に設定するレベルです。|
|停止|ポーリングを停止します。|

- 種別
ポーリングの種類を指定します。2021年９月時点では、以下の種類を組み込んでいます。

|種別|内容|
|----|----|
|PING|誰もが知っているICMP Echoリクエストによる応答確認です。応答がない場合は異常と判断します。応答時間を記録しています。|
|SNMP|SNMPによるポーリングです。定義の項目にポーリングするMIBの情報と判断基準を記載します。sysUptimeを設定すれば、稼働時間を監視します。ifOperStatus.1のような設定をすれば、LANポートの状態を監視するポーリングになります。|
|TCP|TCPでの接続確認を行うポーリングです。定義に接続するポート番号を指定します。接続できれば正常です。応答時間を記録できます。|
|HTTP|Webブラウザーと同じHTTPプロトコルでアクセスするポーリングです。定義にアクセスするURLを指定します。指定したURLから応答を取得できれば、正常と判断できます。httpsのURLを設定した場合、アクセスした時にサーバー証明書の検証を行うモードと行わないモードがあります。応答時間と応答コードを記録します。|
|TLS|TLS(通称SSL)での接続確認を行うポーリングです。定義にポート番号を指定します。接続できた場合に正常と判断します。応答時間と接続した暗号方式、証明書の情報を記録できます。|
|DNS|DNSでの名前解決のポーリングを行います。定義に問い合わせるホスト名を指定します。指定したホスト名の名前解決ができ、かつノードに設定したIPアドレスを含む場合に正常と判断します。ホスト名に対応したIPアドレスの変化を検知するためのポーリングです。応答時間を記録します。|
|NTP|NTPサーバーへ時刻問い合わせのポーリングを行います。応答があれば正常と判断します。応答時間とNTPサーバーの情報を記録します。|
|SYSLOG|受信しているSyslogを検索して特定の条件のログの件数から判断するポーリングです。件数を記録します。Syslogのプライオリティーを集計して判断するモードもあります。 集計結果はAIで分析するために使用します。デバイス、ユーザー、フローのレポートをsyslogから作成するモードもあります。|
|SNMP TRAP|受信しているTRAPのログから特定の条件のTRAPを検索するためのポーリングです。件数を記録します。|
|NetFlow/IPFIX|受信しているNetFlow/IPFIXのログから特定の条件のログを検索するためのポーリングです。件数を記録します。|
|Command|コマンドを実行して結果を判定するポーリングです。実行するコマンドは特定のフォルダにコピーしておく必要があります。|
|SSH|SSHで他のマシン上でコマンドを実行して結果を判定するポーリングです。|
|Report|レポートの信用スコアから判断するレポートでです。|
|TWSNMP|他のTWSNMP FCのマップ状態を判断するポーリングです。複数台のTWSNMP FCを連携させるものです。|
|VMware|VMWare ESXiの情報を取得するためのポーリングです。|

- モード
種別毎に違うモードがあります。詳しくはポーリング種別毎に説明します。

- パラメータ
ポーリングする時に必要なパラメータです。種別とモードによって違います。これも詳しくはポーリング種別毎に説明します。

- フィルター
ログの検索などのポーリングの時にフィルター条件として指定するパラメータです。これも詳しくはポーリング種別毎に説明します。

- 抽出パターン
ログの検索やHTTPのポーリングの時にデータ抽出するために利用するパターンを選択します。これも詳しくはポーリング種別毎に説明します。

- 判定スクリプト
ポーリングで取得したデータを使って異常を判定するためのスクリプトを指定します。JavaScriptで指定できます。基本的には最後の実行文の結果が正常の判定に使われます。これも詳しくはポーリング種別毎に説明します。

- ポーリング間隔
ポーリングを実施する間隔を秒単位で指定します。

- タイムアウト
応答なしと判断する秒数を指定します。

- リトライ回数
応答なしと判断したあと諦めるまで追加でポーリング実行する回数を指定します。なので、０は１回は実行するという意味です。

- ログモード
ポーリングの結果をログに記録する時のモードを指定します。

|ログモード|内容|
|----|----|
|記録しない|最後にポーリングした結果だけ残して忘れていくモードです。|
|常に記録|状態が同じでも常に結果を記録するモードです。|
|状態変化時のみ記録|ポーリングの状態（正常、異常）が変化した時だけ記録するモードです。|
|AI分析|常に記録しますが、それに加えて１時間毎にAIがポーリング結果を分析してくれるモードです。|

:::message
ポーリング結果をグラフなどで分析するためには、ポーリング結果を記録する必要があります。「記録しない」に設定されているポーリングはグラフ表示できません。
:::

# ポーリングの詳しい説明

ポーリングに関して詳しい説明はTWSNMPポーリング辞典に記載する予定です。